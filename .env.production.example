# MixDrop Production Environment Configuration
# Copy this file to .env.production and fill in your values

# ====================================
# DOMAIN CONFIGURATION
# ====================================
# Configure your domain names for each service
# All services will automatically get HTTPS certificates via Let's Encrypt

# Main application domain
APP_DOMAIN=mixdrop.yourdomain.com

# Grafana observability dashboard
GRAFANA_DOMAIN=grafana.yourdomain.com

# MinIO S3 API endpoint
MINIO_DOMAIN=minio.yourdomain.com

# MinIO management console
MINIO_CONSOLE_DOMAIN=console.minio.yourdomain.com

# Let's Encrypt notification email
ACME_EMAIL=admin@yourdomain.com

# ====================================
# DATABASE & CACHE
# ====================================

# PostgreSQL Database
POSTGRES_USER=mixdrop
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_32
POSTGRES_DB=mixdrop

# Redis Cache (with password for security)
REDIS_PASSWORD=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_32

# ====================================
# S3 STORAGE
# ====================================

# Option 1: AWS S3 (recommended for production)
S3_ENDPOINT=https://s3.amazonaws.com
S3_PUBLIC_ENDPOINT=https://s3.amazonaws.com
S3_BUCKET=your-mixdrop-bucket-name
S3_ACCESS_KEY=YOUR_AWS_ACCESS_KEY_ID
S3_SECRET_KEY=YOUR_AWS_SECRET_ACCESS_KEY
S3_REGION=us-east-1
S3_FORCE_PATH_STYLE=false

# Option 2: Use bundled MinIO (included in docker-compose.prod.yml)
# Uncomment these lines and comment out AWS S3 settings above
# S3_ENDPOINT=http://minio:9000
# S3_PUBLIC_ENDPOINT=https://${MINIO_DOMAIN}
# S3_BUCKET=mixdrop
# S3_ACCESS_KEY=your-custom-minio-access-key
# S3_SECRET_KEY=your-custom-minio-secret-key
# S3_REGION=us-east-1
# S3_FORCE_PATH_STYLE=true

# ====================================
# AUTHENTICATION
# ====================================

# NextAuth Configuration
NEXTAUTH_URL=https://${APP_DOMAIN}
NEXTAUTH_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_32

# OAuth Provider - Configure for your SSO (Keycloak, Auth0, Google, etc.)
OAUTH_CLIENT_ID=your-oauth-client-id
OAUTH_CLIENT_SECRET=your-oauth-client-secret
OAUTH_ISSUER=https://your-sso-provider.com
OAUTH_AUTHORIZATION_URL=https://your-sso-provider.com/oauth/authorize
OAUTH_TOKEN_URL=https://your-sso-provider.com/oauth/token
OAUTH_USERINFO_URL=https://your-sso-provider.com/oauth/userinfo

# Admin Configuration
# Comma-separated list of email addresses that should automatically have admin role
# These users will be promoted to admin when they first sign in via OAuth
# First user to sign in will also become admin (fallback mechanism)
ADMIN_EMAILS=your-admin-email@example.com,other-admin@example.com

# ====================================
# OPTIONAL SERVICES
# ====================================

# MinIO Credentials (only if using bundled MinIO instead of AWS S3)
MINIO_ROOT_USER=your-custom-minio-user
MINIO_ROOT_PASSWORD=your-custom-minio-password

# ====================================
# LOGGING & OBSERVABILITY
# ====================================

# Application Logging
# Log level: info (production), debug (troubleshooting)
LOG_LEVEL=info

# Grafana Dashboard
# Admin credentials for accessing observability dashboard
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_32
GRAFANA_SECRET_KEY=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_32
GRAFANA_ROOT_URL=https://${GRAFANA_DOMAIN}
